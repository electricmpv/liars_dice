好的，收到补充的“跳开质疑”规则。这确实是一个有趣的机制，能显著改变游戏节奏。我们将其补充到之前的规则文档中。

为了清晰起见，我将“常规质疑”和“跳开质疑”分开描述，并更新“质疑结算”部分以包含不同的惩罚。

---

## 游戏规则说明：吹牛骰子 v1.1 (供 AI 理解 - 含跳开质疑)

**1. 游戏目标**

成为最后一个手中还有骰子的玩家。

**2. 游戏设置**

* **玩家配置:** 每个玩家（包括人类和 AI）初始拥有 5 个标准的六面骰子（点数为 1 到 6）。
* **骰子可见性:** 每个玩家只能看到自己的骰子点数，对其他玩家保密。
* **总骰子数:** 游戏中的总骰子数等于所有当前未被淘汰的玩家手中骰子数的总和。

**3. 游戏流程**

* 游戏按回合进行。
* 每回合开始时，所有未被淘汰的玩家重新投掷自己当前拥有的所有骰子。
* 玩家按固定顺序轮流进行操作。
* **轮到当前玩家时**，他/她必须执行以下操作之一：
    * **叫价 (Bid):** 喊出一个比当前最高叫价更高的叫价。
    * **常规质疑 (Sequential Challenge):** 质疑**上一个**玩家的叫价（仅当存在上一个叫价时）。
* **非当前回合玩家的操作:** 在特定条件下，非当前回合玩家可以执行 **跳开质疑 (Jump Challenge)** (详见第 7 条)。

**4. 骰子点数规则**

* **普通点数:** `2`, `3`, `4`, `5`, `6` 为普通点数。在比较点数大小时，`6` 是最大的普通点数。
* **特殊点数 `1` (Ace / 幺鸡):**
    * **叫价等级:** 在叫价时，`1` 被视为**最高等级**的点数，高于 `6`。点数等级排序为：`2 < 3 < 4 < 5 < 6 < 1`。
    * **万能点 (Wild Card) 规则 - (重要！):**
        * **条件:** 在当前回合中，**只要还没有任何玩家叫价的点数是 `1`** (例如，还没人喊过 "X 个 1")，那么所有玩家手中的 `1` 点骰子都可以**充当万能点**，在计算数量时可以代表任何其他点数 (`2` 到 `6`)。
        * **失效:** 一旦当前回合中有**任何一个玩家**叫价的点数是 `1` (比如喊了 "3 个 1")，那么从**那一刻起直到本回合结束**，所有玩家手中的 `1` 点骰子**不再是万能点**，只能被计算为点数 `1` 本身。

**5. 叫价 (Bidding) 规则**

* **格式:** 一个叫价包含两个部分：数量 (Count) 和 点数 (Face Value)。例如，“3 个 4”表示声称场上所有玩家的骰子中，至少有 3 个骰子的点数是 4 (根据当前的万能点规则计算)。
* **首次叫价:** 每回合的第一个叫价可以是任意有效的点数 (`1` 到 `6`) 和任意数量（至少为 1，且不超过场上总骰子数）。
* **后续叫价:** 后续的叫价 `[新点数, 新数量]` 必须**高于**当前最高的叫价 `[当前点数, 当前数量]`。判定规则如下：
    * **规则 1 (数量优先):** 如果 `新数量 > 当前数量`，则叫价有效，此时 `新点数` 可以是任意点数 (`1` 到 `6`)。
    * **规则 2 (点数升级):** 如果 `新数量 == 当前数量`，则 `新点数` 必须**严格大于** `当前点数` (按照 `2 < 3 < 4 < 5 < 6 < 1` 的等级顺序)。
* **特殊用户规则 (需要确认/验证):**
    * **当叫价为 "X 个 1" 时:** 如果当前的最高叫价的点数是 `1` (例如 "3 个 1")，那么下一个玩家**必须增加数量** (例如，只能叫 "4 个 2"、"4 个 1" 等)，不允许在数量不变的情况下只提升点数。
    * *(给 AI 的提示：请优先遵循此规则描述。但在实现时，建议对照 `server/src/modules/game/game-manager.ts` 中的 `validateBid` 函数进行最终确认，因为标准规则可能不同。)*
* **数量上限:** 任何叫价的数量都不能超过场上所有未淘汰玩家的总骰子数。
* **叫价保护期:** 任何玩家成功叫价后，会有一个 3 秒的“保护期”。

**6. 常规质疑 (Sequential Challenge) 规则**

* **发起者:** 只有**轮到当前回合的玩家**才能发起常规质疑。
* **目标:** 质疑的对象是**上一个**玩家做出的叫价。
* **时机:** 玩家选择质疑，而不是进行新的叫价。必须在自己的回合时间内做出决定。

**7. 跳开质疑 (Jump Challenge) 规则 (特殊)**

* **目的:** 加快游戏节奏，防止玩家在不利顺位时无法干预，增加策略性。
* **可用时机:**
    1.  上一个玩家完成叫价后，**3 秒保护期结束**。
    2.  并且，**轮到当前回合的玩家还没有做出操作**（叫价或常规质疑）。
* **可发起玩家:** **除了**刚刚完成叫价的玩家（叫价者）和轮到当前回合的玩家（顺位玩家）之外的**所有其他未被淘汰的玩家**。
* **执行效果:** 任何符合条件的玩家一旦成功发起跳开质疑，将**立即**结算上一个玩家的叫价，跳过中间所有玩家的回合。
* **结算惩罚 (重要！):** 跳开质疑的结算结果与常规质疑不同：
    * **如果叫价有效 (实际总数 >= 叫价数量):** **发起跳开质疑的玩家**失败，并且**失去 2 个骰子**。
    * **如果叫价无效 (实际总数 < 叫价数量):** **上一个叫价者**失败，失去 1 个骰子（惩罚同常规质疑）。

**8. 质疑结算 (Resolution) 规则 (通用)**

* **触发:** 由常规质疑或跳开质疑触发。
* **亮牌:** 所有未被淘汰的玩家展示自己的骰子。
* **计数:** 根据被质疑的叫价 `[点数, 数量]`，计算场上所有骰子中实际包含该 `点数` 的总数。
    * **关键:** 计数时必须严格应用当前的**万能点规则** (见第 4 条)。
* **判定与惩罚:**
    * **如果 `实际总数 >= 叫价数量` (叫价有效):**
        * 常规质疑：**质疑者**失去 **1** 个骰子。
        * 跳开质疑：**发起跳开质疑者**失去 **2** 个骰子。
    * **如果 `实际总数 < 叫价数量` (叫价无效):**
        * 无论是常规质疑还是跳开质疑：**上一个叫价者**失去 **1** 个骰子。
* **下一回合:** 由在本次质疑结算中**失去骰子**的玩家开始下一回合的叫价。

**9. 玩家淘汰与游戏结束**

* **淘汰:** 当一个玩家失去他/她最后一个骰子时（即骰子数量变为 0），该玩家被淘汰出局。
* **结束:** 当场上只剩下最后一名玩家还有骰子时，游戏结束。
* **胜利:** 最后剩下的那名玩家获得胜利。

---

这个更新后的版本包含了“跳开质疑”的详细规则和特殊惩罚机制，应该能让 AI 更准确地理解你的游戏玩法。